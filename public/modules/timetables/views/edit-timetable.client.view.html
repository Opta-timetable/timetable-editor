<section data-ng-controller="TimetableController" data-ng-init="findOne()">
  <div class="page-header">
    <h1> Edit {{ curriculumSelected.code }}'s timetable</h1>
  </div>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-9">
            <table class="table table-bordered">
            <thead>
            <tr>
                <th>Day</th>
                <!-- Skip items from ng-repeat: http://stackoverflow.com/a/19784026/218882 -->
                <th data-ng-repeat="period in timetableForCurriculum.timetable.timetable[0].periods">{{ "Period-" + period.index }}</th>
            </tr>
            </thead>
            <tr data-ng-repeat="day in timetableForCurriculum.timetable.timetable">
                <td>{{day.dayOfWeek}}</td>
                <!-- Bind to all properties in an object: http://stackoverflow.com/a/19012907/218882 -->
                <td data-ng-repeat="period in day.periods" ng-drop="true"
                    ng-drop-success="onDropComplete($data,$event, day.dayIndex, period.index)"
                    ng-bind="period.subject" ng-class="{'bg-danger' : period.clash}">
                </td>
            </tr>
        </table>
            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-default" ng-click="save()">
                <input type="button" value="Cancel" class="btn btn-default" onclick="location.href='#!/timetables'">
            </div>
        </div>
        <div class="col-md-3">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Subjects</h3>
                </div>
                <div class="panel-body">
                    <ul class="list-group">
                       <li ng-drag="true" ng-drag-data="course"
                           data-ng-repeat="course in timetableForCurriculum.courses" class="list-group-item">
                        {{ course.code }} - {{ course._teacher.code }}
                       </li>
                    </ul>
                </div>
            </div>

        </div>
    </div>
    <div data-ng-show="error" class="text-danger">
        <strong data-ng-bind="error"></strong>
    </div>
</div>

</section>
