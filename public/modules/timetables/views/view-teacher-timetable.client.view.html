<section data-ng-controller="TeacherTimetableController" data-ng-init="findOne()">
  <div class="page-header">
    <h1>{{ "Timetable for " + timetableForTeacher.teacherCode}}</h1>
  </div>
  <div class="clearfix">
    <div class="pull-right">
      <a class="btn btn-info" title="Export Timetable" ng-click='csv.generate()' ng-href="{{ csv.link() }}"
         download="{{timetableForTeacher.teacherCode +'-timetable.csv'}}">
        <i class="glyphicon glyphicon-new-window"></i> &#160;Export
      </a>
    </div>
  </div>
  <br>
  <table class="table table-bordered" ng-table="" export-csv="csv">
    <thead>
      <tr>
        <th>Day</th>
        <!--<th> {{ JSON.stringify( timetable[0].timetable[0].periods[0].subject) }} </th>-->
        <!-- Skip items from ng-repeat: http://stackoverflow.com/a/19784026/218882 -->
        <th data-ng-repeat="period in timetableForTeacher.teachersTimetable[0].periods">
          {{ "Period-" + (period.index+1)}}
        </th>
      </tr>
    </thead>
    <tr data-ng-repeat="day in timetableForTeacher.teachersTimetable">
      <td>{{day.dayOfWeek}}</td>
      <!-- Bind to all properties in an object: http://stackoverflow.com/a/19012907/218882 -->
      <td data-ng-repeat="period in day.periods" ng-class="{'bg-danger': period.clash}">
          {{ period.curriculum + ", " + period.subject}}
      </td>
    </tr>
  </table>
  <div class="row">
    <div class="col-md-12"><a class="btn btn-default" href="/#!/timetables">Back</a></div>
  </div>
</section>
